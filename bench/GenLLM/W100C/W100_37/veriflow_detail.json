{
  "S": 0.86,
  "M": 0.75,
  "E": 0.75,
  "Overall": 0.79,
  "struct_detail": {
    "schema_ok": 1.0,
    "connected_ratio": 0.42857142857142855,
    "acyclic": 1.0,
    "orphan_ratio": 0.0,
    "avg_out_norm": 0.09523809523809523,
    "exit_coverage": 1.0,
    "base_structural_score": 0.7,
    "final_S": 0.86,
    "unreachable_ratio": 0.5714285714285714,
    "dead_end_ratio": 0.0,
    "penalty": 0.5714285714285714,
    "k": 0.15,
    "explanation": {
      "connected_ratio": "Fraction of nodes in the largest weakly connected component",
      "acyclic": "1.0 means no directed cycles; 0.0 means at least one cycle exists",
      "orphan_ratio": "Fraction of nodes with no incoming and no outgoing edges",
      "avg_out_norm": "Average out-degree normalized by maximum possible out-degree",
      "exit_coverage": "Fraction of terminal nodes that are reachable from triggers",
      "unreachable_ratio": "Fraction of nodes not reachable from any trigger",
      "dead_end_ratio": "Reachable nodes/chains that do not lead to terminal actions"
    }
  },
  "semantic_detail": {
    "trigger": 1.0,
    "action": 1.0,
    "support": 0.0,
    "order": 1.0,
    "conditional": 0.35,
    "param_sem": 1.0,
    "intent_edge": 1.0,
    "intent_edge_note": "ratio of satisfied intent-graph edges",
    "params_req": {},
    "intent_conf": 0.7625,
    "source": "rule+llm",
    "intent": {
      "need_condition": true,
      "need_conditional_notify": false,
      "need_db": true,
      "need_email": false,
      "need_form": true,
      "need_http": false,
      "need_schedule": false,
      "need_slack": false,
      "need_telegram": false,
      "need_transform": true
    },
    "intent_chain": [
      "The workflow involves managing a digital identity lifecycle, which typically requires a database to store identity information.",
      "Issuance, updates, and revocation suggest the need for forms to collect and update user data.",
      "Managing the lifecycle implies conditions for when updates or revocations occur, indicating a need for conditional logic.",
      "Transformations may be necessary to handle data changes during the lifecycle process."
    ],
    "irrelevant_nodes": [
      "1",
      "2",
      "3",
      "7"
    ],
    "intent_caps": [
      "condition",
      "db",
      "form",
      "transform"
    ],
    "intent_edges": [
      [
        "form",
        "transform"
      ],
      [
        "transform",
        "db"
      ]
    ],
    "missing_capabilities": [
      "form",
      "transform",
      "db"
    ],
    "alignment": {
      "capability_matches": {
        "form": false,
        "condition": true,
        "transform": false,
        "db": false
      },
      "edge_matches": [
        {
          "from": "form",
          "to": "transform",
          "ok": false,
          "path_nodes": []
        },
        {
          "from": "transform",
          "to": "db",
          "ok": false,
          "path_nodes": []
        }
      ]
    },
    "score_weights": {
      "trigger": 1.0,
      "action": 1.0,
      "support": 1.0,
      "order": 1.0,
      "conditional": 1.0,
      "param_sem": 1.0,
      "intent_edge": 0.5
    },
    "evidence": [
      {
        "rule": "support_transform_required",
        "from": "intent",
        "to": "transform",
        "applicable": true,
        "ok": false,
        "sources": [],
        "targets": [],
        "path": [],
        "note": "transform requested but missing; support score forced to 0"
      },
      {
        "rule": "intent_edge",
        "from": "form",
        "to": "transform",
        "applicable": false,
        "ok": null,
        "sources": [],
        "targets": [],
        "path": [],
        "note": "intent edge missing"
      },
      {
        "rule": "intent_edge",
        "from": "transform",
        "to": "db",
        "applicable": false,
        "ok": null,
        "sources": [],
        "targets": [],
        "path": [],
        "note": "intent edge missing"
      },
      {
        "rule": "form->transform(required)",
        "from": "form",
        "to": "transform",
        "applicable": false,
        "ok": null,
        "sources": [],
        "targets": [],
        "path": [],
        "note": "not applicable (sources/targets empty or graph missing)"
      },
      {
        "rule": "form->db(optional)",
        "from": "form",
        "to": "db",
        "applicable": false,
        "ok": null,
        "sources": [],
        "targets": [],
        "path": [],
        "note": "not applicable (optional)"
      },
      {
        "rule": "transform->db(optional)",
        "from": "transform",
        "to": "db",
        "applicable": false,
        "ok": null,
        "sources": [],
        "targets": [],
        "path": [],
        "note": "not applicable (optional)"
      },
      {
        "rule": "embedding_relevance",
        "applicable": true,
        "ok": true,
        "top_k": 3,
        "threshold": 0.55,
        "boosted": [],
        "note": "soft relevance boost by embeddings (batch)"
      },
      {
        "rule": "extra_conditional_notify",
        "from": "condition",
        "to": "action",
        "applicable": true,
        "ok": false,
        "sources": [
          "4",
          "5",
          "6"
        ],
        "targets": [
          "4",
          "5",
          "6"
        ],
        "path": [
          "4",
          "5",
          "6"
        ],
        "note": "workflow has conditional notify but intent does not require it"
      }
    ],
    "alignment_graph": {
      "intent_caps": [
        "condition",
        "db",
        "form",
        "transform"
      ],
      "intent_edges": [
        {
          "from": "form",
          "to": "transform",
          "ok": false,
          "path": []
        },
        {
          "from": "transform",
          "to": "db",
          "ok": false,
          "path": []
        }
      ],
      "workflow_nodes": [
        {
          "id": "1",
          "label": "Citizen Identity Issuance",
          "capability": "http",
          "relevant": false
        },
        {
          "id": "2",
          "label": "Citizen Identity Update",
          "capability": "http",
          "relevant": false
        },
        {
          "id": "3",
          "label": "Citizen Identity Revocation",
          "capability": "http",
          "relevant": false
        },
        {
          "id": "4",
          "label": "Notify Issuance",
          "capability": "email",
          "relevant": true
        },
        {
          "id": "5",
          "label": "Notify Update",
          "capability": "email",
          "relevant": true
        },
        {
          "id": "6",
          "label": "Notify Revocation",
          "capability": "slack",
          "relevant": true
        },
        {
          "id": "7",
          "label": "Schedule Identity Check",
          "capability": "schedule",
          "relevant": false
        }
      ],
      "workflow_edges": [
        {
          "source": "1",
          "target": "4"
        },
        {
          "source": "2",
          "target": "5"
        },
        {
          "source": "3",
          "target": "6"
        },
        {
          "source": "7",
          "target": "1"
        }
      ],
      "relevant_nodes": [
        "4",
        "5",
        "6"
      ],
      "irrelevant_nodes": [
        "1",
        "2",
        "3",
        "7"
      ],
      "missing_capabilities": [
        "form",
        "transform",
        "db"
      ]
    }
  },
  "exec_detail": {
    "param_ok": 1.0,
    "path_ok": 0.0,
    "runtime_ok": 1.0,
    "dataflow_ok": 1.0,
    "weights": {
      "param": 0.4,
      "path": 0.25,
      "run": 0.15,
      "dataflow": 0.2
    },
    "missing_params": [],
    "param_detail": {
      "checked_nodes": 7
    },
    "unreachable_nodes": [
      "2",
      "3",
      "5",
      "6"
    ],
    "dataflow_detail": {
      "applicable": false,
      "required_fields": {},
      "available_fields": {
        "2": [
          "body",
          "headers",
          "statusCode"
        ],
        "3": [
          "body",
          "headers",
          "statusCode"
        ],
        "7": [
          "timestamp"
        ],
        "5": [
          "body",
          "headers",
          "statusCode"
        ],
        "6": [
          "body",
          "headers",
          "statusCode"
        ],
        "1": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ],
        "4": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ]
      },
      "missing_fields": {}
    },
    "executed_nodes": [
      "7",
      "1",
      "4"
    ],
    "executed_nodes_readable": [
      "Schedule Identity Check",
      "Citizen Identity Issuance",
      "Notify Issuance"
    ],
    "name_map": {
      "1": "Citizen Identity Issuance",
      "2": "Citizen Identity Update",
      "3": "Citizen Identity Revocation",
      "4": "Notify Issuance",
      "5": "Notify Update",
      "6": "Notify Revocation",
      "7": "Schedule Identity Check"
    },
    "node_results": {
      "7": {
        "ok": true,
        "msg": "cron ok"
      },
      "1": {
        "ok": true,
        "msg": "http ok (mock)"
      },
      "4": {
        "ok": true,
        "msg": "email ok (mock)"
      }
    },
    "time_budget_sec": 2.0,
    "faulted_nodes": [],
    "fault_profile": "medium",
    "faults_enabled": false
  },
  "executed_path": [
    "Schedule Identity Check",
    "Citizen Identity Issuance",
    "Notify Issuance"
  ]
}