{
  "S": 0.98,
  "M": 0.8,
  "E": 1.0,
  "Overall": 0.93,
  "struct_detail": {
    "schema_ok": 1.0,
    "connected_ratio": 1.0,
    "acyclic": 1.0,
    "orphan_ratio": 0.0,
    "avg_out_norm": 0.14285714285714285,
    "exit_coverage": 1.0,
    "base_structural_score": 0.96,
    "final_S": 0.98,
    "unreachable_ratio": 0.0,
    "dead_end_ratio": 0.0,
    "penalty": 0.0,
    "k": 0.15,
    "explanation": {
      "connected_ratio": "Fraction of nodes in the largest weakly connected component",
      "acyclic": "1.0 means no directed cycles; 0.0 means at least one cycle exists",
      "orphan_ratio": "Fraction of nodes with no incoming and no outgoing edges",
      "avg_out_norm": "Average out-degree normalized by maximum possible out-degree",
      "exit_coverage": "Fraction of terminal nodes that are reachable from triggers",
      "unreachable_ratio": "Fraction of nodes not reachable from any trigger",
      "dead_end_ratio": "Reachable nodes/chains that do not lead to terminal actions"
    }
  },
  "semantic_detail": {
    "trigger": 1.0,
    "action": 1.0,
    "support": 0.3333333333333333,
    "order": 1.0,
    "conditional": 0.35,
    "param_sem": 1.0,
    "intent_edge": 1.0,
    "intent_edge_note": "ratio of satisfied intent-graph edges",
    "params_req": {},
    "intent_conf": 0.6499999999999999,
    "source": "rule+llm",
    "intent": {
      "need_condition": true,
      "need_conditional_notify": false,
      "need_db": true,
      "need_email": false,
      "need_form": true,
      "need_http": false,
      "need_schedule": false,
      "need_slack": false,
      "need_telegram": false,
      "need_transform": false
    },
    "intent_chain": [
      "The workflow involves managing publishing charges, which likely requires a database to track approvals and invoicing.",
      "Invoicing suggests the need for forms to collect and manage financial information.",
      "Funder reporting implies conditions may need to be checked to ensure compliance with funding requirements."
    ],
    "irrelevant_nodes": [
      "1",
      "2",
      "4",
      "6"
    ],
    "intent_caps": [
      "condition",
      "db",
      "form"
    ],
    "intent_edges": [],
    "missing_capabilities": [
      "form",
      "db"
    ],
    "alignment": {
      "capability_matches": {
        "form": false,
        "condition": true,
        "db": false
      },
      "edge_matches": []
    },
    "score_weights": {
      "trigger": 1.0,
      "action": 1.0,
      "support": 1.0,
      "order": 1.0,
      "conditional": 1.0,
      "param_sem": 1.0,
      "intent_edge": 0.5
    },
    "evidence": [
      {
        "rule": "form->db(optional)",
        "from": "form",
        "to": "db",
        "applicable": false,
        "ok": null,
        "sources": [],
        "targets": [],
        "path": [],
        "note": "not applicable (optional)"
      },
      {
        "rule": "embedding_relevance",
        "applicable": true,
        "ok": true,
        "top_k": 3,
        "threshold": 0.55,
        "boosted": [],
        "note": "soft relevance boost by embeddings (batch)"
      },
      {
        "rule": "extra_conditional_notify",
        "from": "condition",
        "to": "action",
        "applicable": true,
        "ok": false,
        "sources": [
          "3",
          "5",
          "7"
        ],
        "targets": [
          "3",
          "5",
          "7"
        ],
        "path": [
          "3",
          "5",
          "7"
        ],
        "note": "workflow has conditional notify but intent does not require it"
      }
    ],
    "alignment_graph": {
      "intent_caps": [
        "condition",
        "db",
        "form"
      ],
      "intent_edges": [],
      "workflow_nodes": [
        {
          "id": "1",
          "label": "Schedule Approval Check",
          "capability": "schedule",
          "relevant": false
        },
        {
          "id": "2",
          "label": "Check Approvals",
          "capability": "http",
          "relevant": false
        },
        {
          "id": "3",
          "label": "Send Approval Notification",
          "capability": "email",
          "relevant": true
        },
        {
          "id": "4",
          "label": "Generate Invoice",
          "capability": "http",
          "relevant": false
        },
        {
          "id": "5",
          "label": "Send Invoice Notification",
          "capability": "email",
          "relevant": true
        },
        {
          "id": "6",
          "label": "Report to Funder",
          "capability": "http",
          "relevant": false
        },
        {
          "id": "7",
          "label": "Send Funder Report Notification",
          "capability": "slack",
          "relevant": true
        }
      ],
      "workflow_edges": [
        {
          "source": "1",
          "target": "2"
        },
        {
          "source": "2",
          "target": "3"
        },
        {
          "source": "3",
          "target": "4"
        },
        {
          "source": "4",
          "target": "5"
        },
        {
          "source": "5",
          "target": "6"
        },
        {
          "source": "6",
          "target": "7"
        }
      ],
      "relevant_nodes": [
        "3",
        "5",
        "7"
      ],
      "irrelevant_nodes": [
        "1",
        "2",
        "4",
        "6"
      ],
      "missing_capabilities": [
        "form",
        "db"
      ]
    }
  },
  "exec_detail": {
    "param_ok": 1.0,
    "path_ok": 1.0,
    "runtime_ok": 1.0,
    "dataflow_ok": 1.0,
    "weights": {
      "param": 0.4,
      "path": 0.25,
      "run": 0.15,
      "dataflow": 0.2
    },
    "missing_params": [],
    "param_detail": {
      "checked_nodes": 7
    },
    "unreachable_nodes": [],
    "dataflow_detail": {
      "applicable": false,
      "required_fields": {},
      "available_fields": {
        "1": [
          "timestamp"
        ],
        "2": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ],
        "3": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ],
        "4": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ],
        "5": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ],
        "6": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ],
        "7": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ]
      },
      "missing_fields": {}
    },
    "executed_nodes": [
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "7"
    ],
    "executed_nodes_readable": [
      "Schedule Approval Check",
      "Check Approvals",
      "Send Approval Notification",
      "Generate Invoice",
      "Send Invoice Notification",
      "Report to Funder",
      "Send Funder Report Notification"
    ],
    "name_map": {
      "1": "Schedule Approval Check",
      "2": "Check Approvals",
      "3": "Send Approval Notification",
      "4": "Generate Invoice",
      "5": "Send Invoice Notification",
      "6": "Report to Funder",
      "7": "Send Funder Report Notification"
    },
    "node_results": {
      "1": {
        "ok": true,
        "msg": "cron ok"
      },
      "2": {
        "ok": true,
        "msg": "http ok (mock)"
      },
      "3": {
        "ok": true,
        "msg": "email ok (mock)"
      },
      "4": {
        "ok": true,
        "msg": "http ok (mock)"
      },
      "5": {
        "ok": true,
        "msg": "email ok (mock)"
      },
      "6": {
        "ok": true,
        "msg": "http ok (mock)"
      },
      "7": {
        "ok": true,
        "msg": "slack ok (mock)"
      }
    },
    "time_budget_sec": 2.0,
    "faulted_nodes": [],
    "fault_profile": "medium",
    "faults_enabled": false
  },
  "executed_path": [
    "Schedule Approval Check",
    "Check Approvals",
    "Send Approval Notification",
    "Generate Invoice",
    "Send Invoice Notification",
    "Report to Funder",
    "Send Funder Report Notification"
  ]
}