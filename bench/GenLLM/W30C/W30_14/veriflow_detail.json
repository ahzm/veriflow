{
  "S": 0.98,
  "M": 0.79,
  "E": 0.8,
  "Overall": 0.86,
  "struct_detail": {
    "schema_ok": 1.0,
    "connected_ratio": 1.0,
    "acyclic": 1.0,
    "orphan_ratio": 0.0,
    "avg_out_norm": 0.16666666666666666,
    "exit_coverage": 1.0,
    "base_structural_score": 0.96,
    "final_S": 0.98,
    "unreachable_ratio": 0.0,
    "dead_end_ratio": 0.0,
    "penalty": 0.0,
    "k": 0.15,
    "explanation": {
      "connected_ratio": "Fraction of nodes in the largest weakly connected component",
      "acyclic": "1.0 means no directed cycles; 0.0 means at least one cycle exists",
      "orphan_ratio": "Fraction of nodes with no incoming and no outgoing edges",
      "avg_out_norm": "Average out-degree normalized by maximum possible out-degree",
      "exit_coverage": "Fraction of terminal nodes that are reachable from triggers",
      "unreachable_ratio": "Fraction of nodes not reachable from any trigger",
      "dead_end_ratio": "Reachable nodes/chains that do not lead to terminal actions"
    }
  },
  "semantic_detail": {
    "trigger": 1.0,
    "action": 1.0,
    "support": 0.6666666666666666,
    "order": 1.0,
    "conditional": 0.0,
    "param_sem": 1.0,
    "intent_edge": 1.0,
    "intent_edge_note": "ratio of satisfied intent-graph edges",
    "params_req": {},
    "intent_conf": 0.8357142857142857,
    "source": "rule+llm",
    "intent": {
      "need_condition": true,
      "need_conditional_notify": true,
      "need_db": false,
      "need_email": true,
      "need_form": true,
      "need_http": true,
      "need_schedule": true,
      "need_slack": false,
      "need_telegram": false,
      "need_transform": true
    },
    "intent_chain": [
      "rule: matched schedule keywords or English time pattern",
      "rule: matched email keywords",
      "rule: matched need_form keywords",
      "The workflow involves scheduling survey invitations, indicating a need for scheduling.",
      "Survey invitations are to be sent via email, confirming the need for email functionality.",
      "Collecting responses via webhook suggests the need for HTTP integration.",
      "The task does not mention any requirements for Slack or Telegram notifications.",
      "There is no explicit mention of a database requirement in the description.",
      "Responses are collected through a form, indicating a need for form functionality.",
      "The need to compute NPS and satisfaction scores implies a condition to evaluate.",
      "Aggregating metrics suggests a transformation of data is necessary.",
      "Alerting managers when scores drop indicates a need for conditional notifications."
    ],
    "irrelevant_nodes": [
      "3",
      "7"
    ],
    "intent_caps": [
      "condition",
      "email",
      "form",
      "http",
      "schedule",
      "transform"
    ],
    "intent_edges": [
      [
        "schedule",
        "http"
      ],
      [
        "schedule",
        "email"
      ],
      [
        "form",
        "transform"
      ],
      [
        "condition",
        "email"
      ],
      [
        "condition",
        "action"
      ]
    ],
    "missing_capabilities": [
      "condition"
    ],
    "alignment": {
      "capability_matches": {
        "schedule": true,
        "transform": true,
        "form": true,
        "http": true,
        "email": true,
        "condition": false
      },
      "edge_matches": [
        {
          "from": "schedule",
          "to": "http",
          "ok": true,
          "path_nodes": [
            "4",
            "5",
            "6"
          ]
        },
        {
          "from": "schedule",
          "to": "email",
          "ok": true,
          "path_nodes": [
            "1",
            "2"
          ]
        },
        {
          "from": "form",
          "to": "transform",
          "ok": true,
          "path_nodes": [
            "4",
            "5"
          ]
        },
        {
          "from": "condition",
          "to": "email",
          "ok": false,
          "path_nodes": []
        },
        {
          "from": "condition",
          "to": "action",
          "ok": false,
          "path_nodes": []
        }
      ]
    },
    "score_weights": {
      "trigger": 1.0,
      "action": 1.0,
      "support": 1.0,
      "order": 1.0,
      "conditional": 1.0,
      "param_sem": 1.0,
      "intent_edge": 0.5
    },
    "evidence": [
      {
        "rule": "intent_edge",
        "from": "schedule",
        "to": "http",
        "applicable": true,
        "ok": true,
        "sources": [
          "1",
          "4"
        ],
        "targets": [
          "6"
        ],
        "path": [
          "4",
          "5",
          "6"
        ],
        "note": "intent edge satisfied"
      },
      {
        "rule": "intent_edge",
        "from": "schedule",
        "to": "email",
        "applicable": true,
        "ok": true,
        "sources": [
          "1",
          "4"
        ],
        "targets": [
          "2"
        ],
        "path": [
          "1",
          "2"
        ],
        "note": "intent edge satisfied"
      },
      {
        "rule": "intent_edge",
        "from": "form",
        "to": "transform",
        "applicable": true,
        "ok": true,
        "sources": [
          "4"
        ],
        "targets": [
          "5"
        ],
        "path": [
          "4",
          "5"
        ],
        "note": "intent edge satisfied"
      },
      {
        "rule": "intent_edge",
        "from": "condition",
        "to": "email",
        "applicable": false,
        "ok": null,
        "sources": [],
        "targets": [
          "2"
        ],
        "path": [],
        "note": "intent edge missing"
      },
      {
        "rule": "intent_edge",
        "from": "condition",
        "to": "action",
        "applicable": false,
        "ok": null,
        "sources": [],
        "targets": [
          "2",
          "7"
        ],
        "path": [],
        "note": "intent edge missing"
      },
      {
        "rule": "schedule->http(required)",
        "from": "schedule",
        "to": "http",
        "applicable": true,
        "ok": true,
        "sources": [
          "1",
          "4"
        ],
        "targets": [
          "6"
        ],
        "path": [
          "4",
          "5",
          "6"
        ],
        "note": "required semantic path found"
      },
      {
        "rule": "schedule->email(required)",
        "from": "schedule",
        "to": "email",
        "applicable": true,
        "ok": true,
        "sources": [
          "1",
          "4"
        ],
        "targets": [
          "2"
        ],
        "path": [
          "1",
          "2"
        ],
        "note": "required semantic path found"
      },
      {
        "rule": "http->email(required)",
        "from": "http",
        "to": "email",
        "applicable": true,
        "ok": false,
        "sources": [
          "6"
        ],
        "targets": [
          "2"
        ],
        "path": [],
        "note": "required semantic path missing"
      },
      {
        "rule": "form->transform(required)",
        "from": "form",
        "to": "transform",
        "applicable": true,
        "ok": true,
        "sources": [
          "4"
        ],
        "targets": [
          "5"
        ],
        "path": [
          "4",
          "5"
        ],
        "note": "required semantic path found"
      },
      {
        "rule": "condition->email(required)",
        "from": "condition",
        "to": "email",
        "applicable": false,
        "ok": null,
        "sources": [],
        "targets": [
          "2"
        ],
        "path": [],
        "note": "not applicable (sources/targets empty or graph missing)"
      },
      {
        "rule": "embedding_relevance",
        "applicable": true,
        "ok": true,
        "top_k": 3,
        "threshold": 0.55,
        "boosted": [],
        "note": "soft relevance boost by embeddings (batch)"
      }
    ],
    "alignment_graph": {
      "intent_caps": [
        "condition",
        "email",
        "form",
        "http",
        "schedule",
        "transform"
      ],
      "intent_edges": [
        {
          "from": "schedule",
          "to": "http",
          "ok": true,
          "path": [
            "4",
            "5",
            "6"
          ]
        },
        {
          "from": "schedule",
          "to": "email",
          "ok": true,
          "path": [
            "1",
            "2"
          ]
        },
        {
          "from": "form",
          "to": "transform",
          "ok": true,
          "path": [
            "4",
            "5"
          ]
        },
        {
          "from": "condition",
          "to": "email",
          "ok": false,
          "path": []
        },
        {
          "from": "condition",
          "to": "action",
          "ok": false,
          "path": []
        }
      ],
      "workflow_nodes": [
        {
          "id": "1",
          "label": "Schedule Survey",
          "capability": "schedule",
          "relevant": true
        },
        {
          "id": "2",
          "label": "Send Email",
          "capability": "email",
          "relevant": true
        },
        {
          "id": "3",
          "label": "Send SMS",
          "capability": null,
          "relevant": false
        },
        {
          "id": "4",
          "label": "Webhook",
          "capability": "schedule",
          "relevant": true
        },
        {
          "id": "5",
          "label": "Compute NPS and Satisfaction",
          "capability": "transform",
          "relevant": true
        },
        {
          "id": "6",
          "label": "Push to BI Tool",
          "capability": "http",
          "relevant": true
        },
        {
          "id": "7",
          "label": "Alert Managers",
          "capability": "slack",
          "relevant": false
        }
      ],
      "workflow_edges": [
        {
          "source": "1",
          "target": "2"
        },
        {
          "source": "1",
          "target": "3"
        },
        {
          "source": "2",
          "target": "4"
        },
        {
          "source": "3",
          "target": "4"
        },
        {
          "source": "4",
          "target": "5"
        },
        {
          "source": "5",
          "target": "6"
        },
        {
          "source": "6",
          "target": "7"
        }
      ],
      "relevant_nodes": [
        "1",
        "2",
        "4",
        "5",
        "6"
      ],
      "irrelevant_nodes": [
        "3",
        "7"
      ],
      "missing_capabilities": [
        "condition"
      ]
    }
  },
  "exec_detail": {
    "param_ok": 1.0,
    "path_ok": 1.0,
    "runtime_ok": 1.0,
    "dataflow_ok": 0.0,
    "weights": {
      "param": 0.4,
      "path": 0.25,
      "run": 0.15,
      "dataflow": 0.2
    },
    "missing_params": [],
    "param_detail": {
      "checked_nodes": 7
    },
    "unreachable_nodes": [],
    "dataflow_detail": {
      "applicable": true,
      "required_fields": {
        "6": [
          "nps",
          "satisfaction"
        ]
      },
      "available_fields": {
        "1": [
          "timestamp"
        ],
        "2": [
          "timestamp"
        ],
        "3": [
          "timestamp"
        ],
        "4": [
          "timestamp"
        ],
        "5": [
          "timestamp"
        ],
        "6": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ],
        "7": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ]
      },
      "missing_fields": {
        "6": [
          "nps",
          "satisfaction"
        ]
      }
    },
    "executed_nodes": [
      "1",
      "4",
      "2",
      "3",
      "5",
      "6",
      "7"
    ],
    "executed_nodes_readable": [
      "Schedule Survey",
      "Webhook",
      "Send Email",
      "Send SMS",
      "Compute NPS and Satisfaction",
      "Push to BI Tool",
      "Alert Managers"
    ],
    "name_map": {
      "1": "Schedule Survey",
      "2": "Send Email",
      "3": "Send SMS",
      "4": "Webhook",
      "5": "Compute NPS and Satisfaction",
      "6": "Push to BI Tool",
      "7": "Alert Managers"
    },
    "node_results": {
      "1": {
        "ok": true,
        "msg": "cron ok"
      },
      "4": {
        "ok": true,
        "msg": "noop"
      },
      "2": {
        "ok": true,
        "msg": "email ok (mock)"
      },
      "3": {
        "ok": true,
        "msg": "noop"
      },
      "5": {
        "ok": true,
        "msg": "noop"
      },
      "6": {
        "ok": true,
        "msg": "http ok (mock)"
      },
      "7": {
        "ok": true,
        "msg": "slack ok (mock)"
      }
    },
    "time_budget_sec": 2.0,
    "faulted_nodes": [],
    "fault_profile": "medium",
    "faults_enabled": false
  },
  "executed_path": [
    "Schedule Survey",
    "Webhook",
    "Send Email",
    "Send SMS",
    "Compute NPS and Satisfaction",
    "Push to BI Tool",
    "Alert Managers"
  ]
}