{
  "S": 0.97,
  "M": 0.79,
  "E": 0.75,
  "Overall": 0.84,
  "struct_detail": {
    "schema_ok": 1.0,
    "connected_ratio": 1.0,
    "acyclic": 1.0,
    "orphan_ratio": 0.0,
    "avg_out_norm": 0.125,
    "exit_coverage": 1.0,
    "base_structural_score": 0.96,
    "final_S": 0.97,
    "unreachable_ratio": 0.25,
    "dead_end_ratio": 0.0,
    "penalty": 0.25,
    "k": 0.15,
    "explanation": {
      "connected_ratio": "Fraction of nodes in the largest weakly connected component",
      "acyclic": "1.0 means no directed cycles; 0.0 means at least one cycle exists",
      "orphan_ratio": "Fraction of nodes with no incoming and no outgoing edges",
      "avg_out_norm": "Average out-degree normalized by maximum possible out-degree",
      "exit_coverage": "Fraction of terminal nodes that are reachable from triggers",
      "unreachable_ratio": "Fraction of nodes not reachable from any trigger",
      "dead_end_ratio": "Reachable nodes/chains that do not lead to terminal actions"
    }
  },
  "semantic_detail": {
    "trigger": 1.0,
    "action": 1.0,
    "support": 0.6666666666666666,
    "order": 1.0,
    "conditional": 0.0,
    "param_sem": 1.0,
    "intent_edge": 1.0,
    "intent_edge_note": "ratio of satisfied intent-graph edges",
    "params_req": {},
    "intent_conf": 0.8999999999999999,
    "source": "rule+llm",
    "intent": {
      "need_condition": true,
      "need_conditional_notify": true,
      "need_db": true,
      "need_email": true,
      "need_form": false,
      "need_http": true,
      "need_schedule": false,
      "need_slack": false,
      "need_telegram": false,
      "need_transform": true
    },
    "intent_chain": [
      "rule: matched email keywords",
      "rule: matched need_http keywords",
      "rule: matched need_db keywords",
      "The task involves consolidating financial transactions from banking APIs, indicating the need for HTTP requests.",
      "Email alerts to compliance officers suggest the need for email notifications.",
      "Writing results to a ledger database indicates a need for database operations.",
      "Normalizing currencies and flagging suspicious patterns implies data transformation is required.",
      "The mention of flagging suspicious patterns suggests a conditional check is necessary.",
      "Alerts to compliance officers based on flagged patterns indicate a need for conditional notifications."
    ],
    "irrelevant_nodes": [
      "1"
    ],
    "intent_caps": [
      "condition",
      "db",
      "email",
      "http",
      "transform"
    ],
    "intent_edges": [
      [
        "transform",
        "db"
      ],
      [
        "http",
        "db"
      ],
      [
        "condition",
        "email"
      ],
      [
        "condition",
        "action"
      ]
    ],
    "missing_capabilities": [
      "condition"
    ],
    "alignment": {
      "capability_matches": {
        "db": true,
        "transform": true,
        "http": true,
        "email": true,
        "condition": false
      },
      "edge_matches": [
        {
          "from": "transform",
          "to": "db",
          "ok": true,
          "path_nodes": [
            "5",
            "6",
            "7"
          ]
        },
        {
          "from": "http",
          "to": "db",
          "ok": true,
          "path_nodes": [
            "2",
            "3",
            "4",
            "5",
            "6",
            "7"
          ]
        },
        {
          "from": "condition",
          "to": "email",
          "ok": false,
          "path_nodes": []
        },
        {
          "from": "condition",
          "to": "action",
          "ok": false,
          "path_nodes": []
        }
      ]
    },
    "score_weights": {
      "trigger": 1.0,
      "action": 1.0,
      "support": 1.0,
      "order": 1.0,
      "conditional": 1.0,
      "param_sem": 1.0,
      "intent_edge": 0.5
    },
    "evidence": [
      {
        "rule": "intent_edge",
        "from": "transform",
        "to": "db",
        "applicable": true,
        "ok": true,
        "sources": [
          "5"
        ],
        "targets": [
          "7"
        ],
        "path": [
          "5",
          "6",
          "7"
        ],
        "note": "intent edge satisfied"
      },
      {
        "rule": "intent_edge",
        "from": "http",
        "to": "db",
        "applicable": true,
        "ok": true,
        "sources": [
          "2",
          "3",
          "4",
          "6"
        ],
        "targets": [
          "7"
        ],
        "path": [
          "2",
          "3",
          "4",
          "5",
          "6",
          "7"
        ],
        "note": "intent edge satisfied"
      },
      {
        "rule": "intent_edge",
        "from": "condition",
        "to": "email",
        "applicable": false,
        "ok": null,
        "sources": [],
        "targets": [
          "8"
        ],
        "path": [],
        "note": "intent edge missing"
      },
      {
        "rule": "intent_edge",
        "from": "condition",
        "to": "action",
        "applicable": false,
        "ok": null,
        "sources": [],
        "targets": [
          "8"
        ],
        "path": [],
        "note": "intent edge missing"
      },
      {
        "rule": "http->email(required)",
        "from": "http",
        "to": "email",
        "applicable": true,
        "ok": true,
        "sources": [
          "2",
          "3",
          "4",
          "6"
        ],
        "targets": [
          "8"
        ],
        "path": [
          "2",
          "3",
          "4",
          "5",
          "6",
          "8"
        ],
        "note": "required semantic path found"
      },
      {
        "rule": "http->db(optional)",
        "from": "http",
        "to": "db",
        "applicable": true,
        "ok": true,
        "sources": [
          "2",
          "3",
          "4",
          "6"
        ],
        "targets": [
          "7"
        ],
        "path": [
          "2",
          "3",
          "4",
          "5",
          "6",
          "7"
        ],
        "note": "optional semantic path found"
      },
      {
        "rule": "transform->db(optional)",
        "from": "transform",
        "to": "db",
        "applicable": true,
        "ok": true,
        "sources": [
          "5"
        ],
        "targets": [
          "7"
        ],
        "path": [
          "5",
          "6",
          "7"
        ],
        "note": "optional semantic path found"
      },
      {
        "rule": "condition->email(required)",
        "from": "condition",
        "to": "email",
        "applicable": false,
        "ok": null,
        "sources": [],
        "targets": [
          "8"
        ],
        "path": [],
        "note": "not applicable (sources/targets empty or graph missing)"
      },
      {
        "rule": "db->email(optional)",
        "from": "db",
        "to": "email",
        "applicable": true,
        "ok": false,
        "sources": [
          "7"
        ],
        "targets": [
          "8"
        ],
        "path": [],
        "note": "optional semantic path not found"
      },
      {
        "rule": "embedding_relevance",
        "applicable": true,
        "ok": true,
        "top_k": 3,
        "threshold": 0.55,
        "boosted": [],
        "note": "soft relevance boost by embeddings (batch)"
      }
    ],
    "alignment_graph": {
      "intent_caps": [
        "condition",
        "db",
        "email",
        "http",
        "transform"
      ],
      "intent_edges": [
        {
          "from": "transform",
          "to": "db",
          "ok": true,
          "path": [
            "5",
            "6",
            "7"
          ]
        },
        {
          "from": "http",
          "to": "db",
          "ok": true,
          "path": [
            "2",
            "3",
            "4",
            "5",
            "6",
            "7"
          ]
        },
        {
          "from": "condition",
          "to": "email",
          "ok": false,
          "path": []
        },
        {
          "from": "condition",
          "to": "action",
          "ok": false,
          "path": []
        }
      ],
      "workflow_nodes": [
        {
          "id": "1",
          "label": "Schedule",
          "capability": "schedule",
          "relevant": false
        },
        {
          "id": "2",
          "label": "Bank API 1",
          "capability": "http",
          "relevant": true
        },
        {
          "id": "3",
          "label": "Bank API 2",
          "capability": "http",
          "relevant": true
        },
        {
          "id": "4",
          "label": "Bank API 3",
          "capability": "http",
          "relevant": true
        },
        {
          "id": "5",
          "label": "Normalize Currencies",
          "capability": "transform",
          "relevant": true
        },
        {
          "id": "6",
          "label": "Fraud Detection API",
          "capability": "http",
          "relevant": true
        },
        {
          "id": "7",
          "label": "Write to Ledger",
          "capability": "db",
          "relevant": true
        },
        {
          "id": "8",
          "label": "Alert Compliance Officers",
          "capability": "email",
          "relevant": true
        }
      ],
      "workflow_edges": [
        {
          "source": "1",
          "target": "2"
        },
        {
          "source": "2",
          "target": "5"
        },
        {
          "source": "3",
          "target": "5"
        },
        {
          "source": "4",
          "target": "5"
        },
        {
          "source": "5",
          "target": "6"
        },
        {
          "source": "6",
          "target": "7"
        },
        {
          "source": "6",
          "target": "8"
        }
      ],
      "relevant_nodes": [
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8"
      ],
      "irrelevant_nodes": [
        "1"
      ],
      "missing_capabilities": [
        "condition"
      ]
    }
  },
  "exec_detail": {
    "param_ok": 1.0,
    "path_ok": 0.0,
    "runtime_ok": 1.0,
    "dataflow_ok": 1.0,
    "weights": {
      "param": 0.4,
      "path": 0.25,
      "run": 0.15,
      "dataflow": 0.2
    },
    "missing_params": [],
    "param_detail": {
      "checked_nodes": 8
    },
    "unreachable_nodes": [
      "3",
      "4"
    ],
    "dataflow_detail": {
      "applicable": false,
      "required_fields": {},
      "available_fields": {
        "1": [
          "timestamp"
        ],
        "3": [
          "body",
          "headers",
          "statusCode"
        ],
        "4": [
          "body",
          "headers",
          "statusCode"
        ],
        "2": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ],
        "5": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ],
        "6": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ],
        "7": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ],
        "8": [
          "body",
          "headers",
          "statusCode",
          "timestamp"
        ]
      },
      "missing_fields": {}
    },
    "executed_nodes": [
      "1",
      "2",
      "5",
      "6",
      "7",
      "8"
    ],
    "executed_nodes_readable": [
      "Schedule",
      "Bank API 1",
      "Normalize Currencies",
      "Fraud Detection API",
      "Write to Ledger",
      "Alert Compliance Officers"
    ],
    "name_map": {
      "1": "Schedule",
      "2": "Bank API 1",
      "3": "Bank API 2",
      "4": "Bank API 3",
      "5": "Normalize Currencies",
      "6": "Fraud Detection API",
      "7": "Write to Ledger",
      "8": "Alert Compliance Officers"
    },
    "node_results": {
      "1": {
        "ok": true,
        "msg": "cron ok"
      },
      "2": {
        "ok": true,
        "msg": "http ok (mock)"
      },
      "5": {
        "ok": true,
        "msg": "noop"
      },
      "6": {
        "ok": true,
        "msg": "http ok (mock)"
      },
      "7": {
        "ok": true,
        "msg": "noop"
      },
      "8": {
        "ok": true,
        "msg": "email ok (mock)"
      }
    },
    "time_budget_sec": 2.0,
    "faulted_nodes": [],
    "fault_profile": "medium",
    "faults_enabled": false
  },
  "executed_path": [
    "Schedule",
    "Bank API 1",
    "Normalize Currencies",
    "Fraud Detection API",
    "Write to Ledger",
    "Alert Compliance Officers"
  ]
}